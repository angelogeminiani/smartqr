
(function(window, SF, $, undefined) { 
    
    // ------------------------------------------------------------------------
    //                      Storage
    //                      
    //                      dependencies:
    //                          b.base.js
    //                      uses:
    //                          
    // ------------------------------------------------------------------------
    
    SF.storage = SF.storage||{};
    
    SF.storage.ready = (function(){
        try{
            return Modernizr ? Modernizr.localstorage:false;
        }catch(err){  
        }
        return false;
    })();

    SF.storage.clear = function(){
        try{
            if(Modernizr){
                if(Modernizr.localstorage){
                    localStorage.clear();  
                }
            }  
        }catch(err){
            SF.error(err);
        }
    };
    
    SF.storage.set = function (/*string*/key, /*string*/value) {
        try{
            if(Modernizr){
                if(Modernizr.localstorage){
                    localStorage.setItem(key, value);  
                }
            }
        }catch(err){  
            SF.error(err);
        }
    }
    
    SF.storage.get = function(/*string*/key, /*string*/defval) {
        try{
            if(Modernizr){
                if(Modernizr.localstorage){
                    if(key in localStorage){
                        return localStorage.getItem(key);
                    } 
                }
            }
            return defval;
        }catch(err){  
            SF.error(err);
        }
        return defval;
    }
    
    SF.storage.remove = function (/*string*/key) {
        try{
            if(Modernizr){
                if(Modernizr.localstorage){
                    var result = localStorage.getItem(key); 
                    localStorage.removeItem(key);  
                    return result;
                }
            }
            return null;
        }catch(err){ 
            SF.error(err);
        }
        return null;
    }
    
    SF.storage.data = function(/*object*/data){
        try{
            if(SF.storage.ready){
                if(data){
                    // SAVE
                    for(key in data){
                        localStorage.setItem(key, data[key]);
                    }
                } else {
                    // RETURN ALL
                    data = {};
                    for(key in localStorage){
                        data[key] = localStorage.getItem(key);
                    }
                }
            }
            return data;
        }catch(err){  
            SF.error(err);
        }
        return data;
    }
    
        
    
    
})(window, smartforge, jQuery);
